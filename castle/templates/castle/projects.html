
{% extends 'home/nav.html' %}
{% load static %}

{% block content %}
    <title>Projects</title>

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="{% static 'castle/css/style.css' %}">

    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
    <script src="https://d3js.org/d3-time.v1.min.js"></script>
    <script src="https://d3js.org/d3-time-format.v2.min.js"></script>
    <script src="{% static 'castle/js/scriptUI.js' %}"></script>

    <div class="wrapper-castle">
        {# TODO Breadcrumbs #}
        <nav class="navbar navbar-light bg-light breadcrumb-nav">
          <a class="navbar-brand">Castle</a>
          <form class="form-inline">
            <input class="form-control mr-sm-2" type="search" placeholder="Search..." aria-label="Search">
            <button class="btn btn-outline-light my-2 my-sm-0" type="submit">Search</button>
          </form>
        </nav>

        <nav class="navbar navbar-light bg-light tool-nav">
          <a class="navbar-brand">Tools</a>
        </nav>

        <div class="draggable-window">
            <div class="container-fluid">
                <ul class="row" id="card-list">
                </ul>
            </div>
        </div>

      {# Right Click Menu on Repository Hub #}
      <nav id="context-menu" class="context-menu">
        <ul class="context-menu__items">
          <li class="context-menu__item">
            <a href="#" class="context-menu__link" data-action="Open"><i class="fa fa-eye"></i> Open</a>
          </li>
           <li class="context-menu__item">
            <a href="#" class="context-menu__link" data-action="Details"><i class="fas fa-info-circle"></i> Details</a>
          </li>
          <li class="context-menu__item">
            <a href="#" class="context-menu__link" data-action="Edit Description"><i class="fa fa-edit"></i> Edit Description</a>
          </li>
          <li class="context-menu__item">
            <a href="#" class="context-menu__link" data-action="Rename"><i class="fas fa-i-cursor"></i> Rename</a>
          </li>
          <li class="context-menu__item">
            <a href="#" class="context-menu__link" data-action="Share"><i class="fas fa-share"></i> Share</a>
          </li>
          <li class="context-menu__item">
            <a href="#" class="context-menu__link" data-action="Delete"><i class="fa fa-times"></i> Delete</a>
          </li>
        </ul>
      </nav>

       {# Right Click Menu on Repository Hub Container #}
      <nav id="container-context-menu" class="container-context-menu">
        <ul class="container-context-menu__items">
          <li class="container-context-menu__item">
            <a href="#" class="container-context-menu__link" data-action="New Repository"><i class="fas fa-plus"></i> New Repository</a>
          </li>
          <li class="container-context-menu__item">
            <a href="#" class="container-context-menu__link" data-action="New Folder"><i class="fas fa-upload"></i> Upload Existing</a>
          </li>
        </ul>
      </nav>

        {# Right Click Menu INSIDE Repository #}
      <nav id="repository-context-menu" class="repository-context-menu">
        <ul class="repository-context-menu__items">
          <li class="repository-context-menu__item">
            <a href="#" class="repository-context-menu__link" data-action="Preview"><i class="fa fa-eye"></i> Preview</a>
          </li>
          <li class="repository-context-menu__item">
            <a href="#" class="repository-context-menu__link" data-action="Edit Metadata"><i class="fa fa-edit"></i> Edit</a>
          </li>
          <li class="repository-context-menu__item">
            <a href="#" class="repository-context-menu__link" data-action="Rename"><i class="fas fa-i-cursor"></i> Rename</a>
          </li>
          <li class="repository-context-menu__item">
            <a href="#" class="repository-context-menu__link" data-action="Delete"><i class="fa fa-times"></i> Delete</a>
          </li>
        </ul>
      </nav>

    {# Right Click Menu INSIDE Repository #}
      <nav id="container-repository-context-menu" class="container-repository-context-menu">
        <ul class="container-repository-context-menu__items">
          <li class="container-repository-context-menu__item">
            <a href="#" class="container-repository-context-menu__link" data-action="Preview"><i class="fa fa-eye"></i> Preview</a>
          </li>
          <li class="container-repository-context-menu__item">
            <a href="#" class="container-repository-context-menu__link" data-action="Edit Metadata"><i class="fa fa-edit"></i> Edit</a>
          </li>
          <li class="container-repository-context-menu__item">
            <a href="#" class="container-repository-context-menu__link" data-action="Rename"><i class="fas fa-i-cursor"></i> Rename</a>
          </li>
          <li class="container-repository-context-menu__item">
            <a href="#" class="container-repository-context-menu__link" data-action="Delete"><i class="fa fa-times"></i> Delete</a>
          </li>
        </ul>
      </nav>
    </div>


    <script src="{% static 'castle/js/contextMenuScript.js' %}"></script>
    <script src="{% static 'castle/js/containerContextMenuScript.js' %}"></script>

    <script>
        window.repos = [];
        var i = 0;
        {% for full_name, repo in repos.items %}
            var owner = "{{ full_name }}";
            owner = owner.split("/")[0];
            window.repos.push({"updated_on": "{{ repo.updated_on }}",
            "host": "{{ repo.host }}",
            "name": "{{ repo.name }}",
            "is_private": "{{ repo.is_private }}",
            "description": "{{ repo.description }}",
            "owner": owner});

            var node = document.createElement("li");
            node.className = "card";
            node.id = i;
            var bodynode = document.createElement("div");
            bodynode.className = "card-body";
            bodynode.id = i;
            var subnode = document.createElement("h5");
            subnode.className = "card-title";
            subnode.id = i;
            var textnode = document.createTextNode('{{ repo.name }}');
            subnode.appendChild(textnode);
            bodynode.appendChild(subnode);
            node.appendChild(bodynode);

            document.getElementById('card-list').appendChild(node);
            i++;
        {% endfor %}
    </script>

{#    <a href="https://bitbucket.org/site/oauth2/authorize?client_id=QjQ49apJFL26jg8gzY&response_type=code">Go</a>#}
{#    <a href="https://github.com/login/oauth/authorize?scope=repo delete_repo&client_id=cfcb9d0319f6d921ae8d">Go</a>#}
{% endblock %}
